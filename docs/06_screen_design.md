# 画面設計書

| 項目 | 内容 |
|------|------|
| システム名 | お天気チェッカー（Weather App） |
| バージョン | 1.0 |
| 作成日 | 2026-02-17 |

---

## 1. 画面一覧

| 画面ID | 画面名 | URL | 認証 |
|--------|--------|-----|------|
| SCR-01 | ログイン画面 | `/` | 不要 |
| SCR-02 | ホーム画面（天気検索） | `/home` | 必須 |
| SCR-03 | マイページ | `/mypage` | 必須 |

---

## 2. 画面遷移図

```
[未ログイン]
    │
    ▼
SCR-01: ログイン画面 (/)
    │
    │ Googleログイン成功
    ▼
SCR-02: ホーム画面 (/home) ◄─── ヘッダーのアプリ名クリック
    │
    │ アバタークリック
    ▼
SCR-03: マイページ (/mypage)
    │
    │ ログアウトボタン
    ▼
SCR-01: ログイン画面 (/)

※ 未認証で /home または /mypage へ直接アクセス → / へリダイレクト
※ ログイン済みで / へアクセス → /home へリダイレクト
```

---

## 3. 共通レイアウト

### 3.1 ヘッダー（ButtonAppBar）

全ページ共通のヘッダーコンポーネント。

```
┌─────────────────────────────────────────────────────────────┐
│ ≡  お天気チェッカー              [名前][メール] [🖼] [ログアウト] │  PC
├─────────────────────────────────────────────────────────────┤
│ ≡  お天気チェッカー                              [🖼] [ログアウト] │  スマホ
└─────────────────────────────────────────────────────────────┘
```

| 要素 | PC（sm以上） | スマホ（xs） |
|------|------------|-------------|
| メニューアイコン | 表示 | 表示 |
| アプリ名 | 表示（クリックで /home） | 表示（クリックで /home） |
| ユーザー名・メール | 表示 | 非表示 |
| アバター | 表示（クリックで /mypage） | 表示（クリックで /mypage） |
| ログアウトボタン | 表示（通常サイズ） | 表示（コンパクト） |

**ログインページでの表示:**
- タイトルが「ログイン画面」
- ユーザー情報エリアなし

---

## 4. 画面詳細

### 4.1 SCR-01: ログイン画面（`/`）

**概要:** アプリのエントリーポイント。未認証ユーザーが最初に見る画面。

**レイアウト:**
```
┌──────────────────────────────────────┐
│ ヘッダー（ログイン画面）               │
├──────────────────────────────────────┤
│                                      │
│  ┌────────────────────────────────┐  │
│  │           ログイン             │  │
│  │                                │  │
│  │  ログインして、お気に入りの      │  │
│  │  都市の天気をチェックしましょう。 │  │
│  │                                │  │
│  │  ┌──────────────────────────┐  │  │
│  │  │  G  Googleでログイン     │  │  │
│  │  └──────────────────────────┘  │  │
│  └────────────────────────────────┘  │
│                                      │
└──────────────────────────────────────┘
```

**コンポーネント構成:**
- `ButtonAppBar`（user未設定）
- `Title`（"ログイン"）
- 説明テキスト（`text-gray-500 text-sm text-center`）
- `SignIn`（Googleログインボタン）

**スタイル:**
- 背景: `bg-gray-50`
- カード: `bg-white rounded-2xl shadow-sm p-8 max-w-md`

**アクション:**
| アクション | 処理 |
|-----------|------|
| Googleでログイン ボタンクリック | Google OAuthページへリダイレクト → 認証後 `/home` へ |

---

### 4.2 SCR-02: ホーム画面（`/home`）

**概要:** アプリのメイン画面。都市選択・天気表示・AI分析を行う。

**レイアウト（初期状態）:**
```
┌──────────────────────────────────────┐
│ ヘッダー（ユーザー情報付き）           │
├──────────────────────────────────────┤
│                                      │
│       お天気チェッカー                │
│                                      │
│  ┌──────────────────────────────┐    │
│  │  都市を選択            ▼     │    │
│  └──────────────────────────────┘    │
│  ┌──────────────┐ ┌──────────────┐   │
│  │    検索      │ │ 現在地から検索│   │  PC
│  └──────────────┘ └──────────────┘   │
│  ┌──────────────────────────────┐    │
│  │            検索              │    │  スマホ
│  └──────────────────────────────┘    │
│  ┌──────────────────────────────┐    │
│  │        現在地から検索         │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

**レイアウト（天気・AI表示後）:**
```
┌──────────────────────────────────────┐
│ ヘッダー                              │
├──────────────────────────────────────┤
│                                      │
│       お天気チェッカー                │
│                                      │
│  [都市を選択         ▼]              │
│  [検索]  [現在地から検索]             │
│                                      │
│       📍 現在地: Tokyo               │  ※現在地検索時のみ
│    緯度: 35.68 / 経度: 139.69         │  ※現在地検索時のみ
│                                      │
│         晴れ（animate-bounce）        │
│           22℃                        │
│                                      │
│  ┌──────────────────────────────┐    │
│  │  AIのコメントテキスト         │    │
│  │                              │    │
│  │  🌿 外出   ★★★★☆  向いている│    │
│  │  🏃 運動   ★★★☆☆  普通      │    │
│  │  👕 洗濯   ★★★★★  最適     │    │
│  │  🚗 ドライブ ★★★★☆ 快適    │    │
│  └──────────────────────────────┘    │
│                                      │
└──────────────────────────────────────┘
```

**AI分析中ローディング状態:**
```
│  ┌──────────────────────────────┐    │
│  │  ↻  AIが分析中...            │    │
│  │                              │    │
│  │  ████████████████████ (pulse)│    │
│  │  ███████████████ (pulse)     │    │
│  │                              │    │
│  │  ██████  ████████ (pulse)   │    │
│  │  ██████  ████████ (pulse)   │    │
│  │  ██████  ████████ (pulse)   │    │
│  │  ██████  ████████ (pulse)   │    │
│  └──────────────────────────────┘    │
```

**コンポーネント構成:**
- `ButtonAppBar`（user付き）
- `Title`（"お天気チェッカー"）
- `WeatherSection`
  - `CityInput`（オートコンプリート）
  - `Button`（検索）
  - `Button`（現在地から検索）
  - 天気表示エリア
  - `AiCommentCard`

**各要素のスタイル:**

| 要素 | スタイル |
|------|---------|
| タイトル | `text-3xl sm:text-5xl font-extrabold text-black` |
| 天気概況 | `text-3xl font-bold text-gray-700 animate-bounce` |
| 気温 | `text-5xl font-extrabold text-gray-800` |
| 現在地名 | `text-lg font-semibold text-blue-600` |
| 座標 | `text-xs text-gray-400` |
| AIカード | `bg-blue-50 rounded-2xl p-4` |
| AIコメント | `text-sm text-gray-700 leading-relaxed` |

**アクション:**

| アクション | 処理 |
|-----------|------|
| 都市を選択（オートコンプリート） | `selectedCityObj`を更新 |
| 検索ボタン | `handleSearch()` → 天気取得 → AI分析 |
| 現在地から検索 | `handleSearchToPosition()` → GPS → 天気取得 → AI分析 |

---

### 4.3 SCR-03: マイページ（`/mypage`）

**概要:** ログインユーザーのプロフィールページ。現バージョンはプレースホルダー。

**レイアウト:**
```
┌──────────────────────────────────────┐
│ ヘッダー（ユーザー情報付き）           │
├──────────────────────────────────────┤
│                                      │
│          マイページ                   │
│                                      │
│  （将来的なコンテンツ予定エリア）      │
│                                      │
└──────────────────────────────────────┘
```

**コンポーネント構成:**
- `ButtonAppBar`（user付き）
- `Title`（"マイページ"）

---

## 5. レスポンシブデザイン

### 5.1 ブレークポイント定義（Tailwind CSS v4 / MUI デフォルト）

| ブレークポイント | サイズ | 対応デバイス |
|----------------|--------|------------|
| `xs`（デフォルト） | 0〜599px | スマートフォン |
| `sm` | 600px〜 | タブレット・PC |
| `md` | 900px〜 | PC |

### 5.2 レスポンシブ適用箇所

| 要素 | スマホ（xs） | タブレット以上（sm+） |
|------|------------|-------------------|
| タイトルフォントサイズ | `text-3xl`（30px） | `text-5xl`（48px） |
| ボタン配置 | 縦並び（`flex-col`） | 横並び（`flex-row`） |
| ヘッダー: 名前・メール | 非表示 | 表示 |
| ヘッダー: ログアウトボタン文字 | `0.7rem` | `0.875rem` |
| コンテンツ幅 | 100%（`w-full`） | 最大448px（`max-w-md`） |

---

## 6. カラーパレット

| 用途 | カラー | クラス |
|------|--------|--------|
| 背景 | #F9FAFB | `bg-gray-50` |
| カード背景 | #FFFFFF | `bg-white` |
| AIカード背景 | #EFF6FF | `bg-blue-50` |
| AIカードスケルトン | #BFDBFE | `bg-blue-200` |
| ヘッダー | MUI Blue（デフォルト） | MUI `AppBar` |
| テキスト（強調） | #111827 | `text-gray-800` |
| テキスト（中） | #374151 | `text-gray-700` |
| テキスト（弱） | #6B7280 | `text-gray-500` |
| テキスト（超弱） | #9CA3AF | `text-gray-400` |
| スコア（高） | #22C55E | `text-green-500` |
| スコア（中） | #EAB308 | `text-yellow-500` |
| スコア（低） | #F87171 | `text-red-400` |
| 現在地テキスト | #2563EB | `text-blue-600` |
| スピナー | #60A5FA | `text-blue-400` |
